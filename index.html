<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Dice Navigation</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
html,body{margin:0;height:100%;overflow:hidden;background:#020617}
#hint{
  position:fixed;
  bottom:12px;
  left:50%;
  transform:translateX(-50%);
  color:#94a3b8;
  font-family:Arial;
  font-size:13px;
}
</style>
</head>
<body>

<div id="hint">Swipe / A / D to move dice</div>

<script src="https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.min.js"></script>
<script>
let scene,camera,renderer,dice,path;
let t=0.5,targetT=0.5,bounce=0;

window.onload=()=>{
  scene=new THREE.Scene();
  scene.background=new THREE.Color(0x020617);

  camera=new THREE.PerspectiveCamera(60,innerWidth/innerHeight,0.1,100);
  camera.position.set(0,4,10);

  renderer=new THREE.WebGLRenderer({antialias:true});
  renderer.setSize(innerWidth,innerHeight);
  document.body.appendChild(renderer.domElement);

  scene.add(new THREE.AmbientLight(0xffffff,1.2));
  const d=new THREE.DirectionalLight(0xffffff,1.5);
  d.position.set(5,10,5);
  scene.add(d);

  scene.add(new THREE.GridHelper(50,50,0x38bdf8,0x1e40af));

  path=new THREE.CatmullRomCurve3([
    new THREE.Vector3(-6,1.1,0),
    new THREE.Vector3(0,1.6,-1.2),
    new THREE.Vector3(6,1.1,0)
  ]);
  const pts=path.getPoints(80);
  scene.add(new THREE.Line(
    new THREE.BufferGeometry().setFromPoints(pts),
    new THREE.LineBasicMaterial({color:0x38bdf8})
  ));

  dice=new THREE.Mesh(
    new THREE.BoxGeometry(2.2,2.2,2.2),
    new THREE.MeshStandardMaterial({color:0x22c55e})
  );
  scene.add(dice);

  window.addEventListener("keydown",e=>{
    if(e.key==="a"||e.key==="ArrowLeft")targetT=0;
    if(e.key==="d"||e.key==="ArrowRight")targetT=1;
    if(e.key===" ")targetT=0.5;
  });

  let sx=0;
  window.addEventListener("touchstart",e=>sx=e.touches[0].clientX);
  window.addEventListener("touchend",e=>{
    const dx=e.changedTouches[0].clientX-sx;
    if(Math.abs(dx)<40)targetT=0.5;
    else targetT=dx<0?0:1;
  });

  animate();
};

function animate(){
  requestAnimationFrame(animate);
  t+=(targetT-t)*0.08;
  bounce+=Math.abs(targetT-t)*0.15;
  const y=Math.sin(bounce)*0.15;
  const p=path.getPoint(t);
  dice.position.set(p.x,p.y+y,p.z);
  renderer.render(scene,camera);
}
</script>
</body>
</html>
